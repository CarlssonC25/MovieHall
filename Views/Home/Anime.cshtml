@model IEnumerable<MovieHall.Models.Anime>
@{
    ViewData["Title"] = "Anime";
}

<h2>Anime List</h2>

<button class="btn btn-primary mb-3" id="openCreateAnimeModal">Neuer Anime</button>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Name</th>
            <th>Orginal name</th>
            <th>Sprache</th>
            <th>Genres</th>
            <th>Gesehen mit</th>
            <th>Aktionen</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var anime in Model)
        {
            <tr>
                
                <td>
                    <a asp-area="" asp-controller="Home" asp-action="ItemView" asp-route-id="@anime.Id" asp-route-type="Anime">
                        @anime.Name
                    </a>
                </td>
                <td>@anime.Orginal_Name</td>
                <td>
                    @{
                        var langOptions = new Dictionary<string, string>
                                {{ "de", "Deutsch" },{ "en", "Englisch" },{"jap","Japanisch"},{"sub","Sub"}};
                    }
                    @langOptions[anime.Language]
                </td>
                <td>@string.Join(", ", anime.AnimeGenres.Select(g => g.Genre.Name))</td>
                <td>@string.Join(", ", anime.AnimeWatchedWiths.Select(w => w.WatchedWith.Name))</td>
                <td>
                    <button class="btn btn-sm btn-warning edit-anime-link" data-id="@anime.Id">Bearbeiten</button>
                    <button class="btn btn-sm btn-danger delete-anime-link" data-id="@anime.Id" data-name="@anime.Name">Löschen</button>
                </td>
            </tr>
        }
    </tbody>
</table>


@*------------------------------ Anime (Create | Edit | Delete)------------------------------*@

@*Modal für Create/Edit *@

<div class="modal fade" id="animeModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content" id="animeModalContent">
            @* Inhalt von PartialView wird hier per JS geladen *@
        </div>
    </div>
</div>

@*Modal für Delete *@
<div class="modal fade" id="deleteAnimeModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="deleteAnimeForm">
                <div class="modal-header">
                    <h5 class="modal-title">Film löschen</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="deleteAnimeId" />
                    <p>Soll der Film <strong>"<span id="deleteAnimeName"></span>"</strong> wirklich gelöscht werden?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
                    <button type="submit" class="btn btn-danger">Löschen</button>
                </div>
            </form>
        </div>
    </div>
</div>


@section Scripts {
    <script src="~/js/animes.js"></script>
}
